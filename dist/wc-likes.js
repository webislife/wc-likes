const WCLikesLangs={ru:{alreadyLike:"\u0412\u044B \u0443\u0436\u0435 \u043B\u0430\u0439\u043A\u043D\u0443\u043B\u0438",likeError:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u043B\u0430\u0439\u043A\u0430 :(",likeNeedAuth:"\u041D\u0443\u0436\u043D\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F"},en:{alreadyLike:"You already like",likeError:"Like error :(",likeNeedAuth:"Login before like"}};class WCLikes extends HTMLElement{Liked=!1;LikesRendered=!1;LikesCount=0;LikesFetch=!1;LikesDisabled=!1;LikesCountNode;LikesIcon;LikesPhrases;LikesPhrasesLang;constructor(){super(),this.LikesIcon=document.createElement("button"),this.LikesCount=+this.getAttribute("value"),this.Liked="true"===this.getAttribute("liked"),this.LikesFetch="true"===this.getAttribute("fetch"),this.LikesDisabled="true"===this.getAttribute("disabled"),this.LikesPhrasesLang=this.getAttribute("lang")||"en",this.LikesPhrases=WCLikesLangs[this.LikesPhrasesLang],this.LikesCountNode=document.createTextNode(this.LikesCount+""),this.classList.add("wc-likes")}static get observedAttributes(){return["value","liked","fetch","disabled"]}attributeChangedCallback(name,oldValue,newValue){switch(name){case"value":this.LikesCount=+newValue,this.LikesRendered&&(this.LikesCountNode.nodeValue=newValue+"");break;case"liked":this.classList.toggle("-liked","true"===newValue+"");break;case"fetch":this.classList.toggle("-fetch","true"===newValue+""||"1"===newValue+"");break;case"disabled":this.classList.toggle("-disabled","true"===newValue+"");break;default:}}connectedCallback(){!1===this.LikesRendered&&(this.buildElement(),this.LikesRendered=!0)}buildElement(){this.LikesIcon.innerHTML="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path xmlns=\"http://www.w3.org/2000/svg\" d=\"M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z\"/></svg>",this.LikesIcon.onpointerup=ev=>this.onLikesSubmit(ev),this.LikesCountNode=document.createTextNode(`${this.LikesCount}`),this.append(this.LikesIcon),this.append(this.LikesCountNode)}async fetchSubmitLikes(){const PromiseAPIStatus=await new Promise(resolve=>{setTimeout(()=>resolve(200),1e3)});return PromiseAPIStatus}async fetchAsyncLikes(){const PromiseAPIStatus=await new Promise(resolve=>{setTimeout(()=>resolve(200),1e3)});return PromiseAPIStatus}async onLikesSubmit(){{if(this.Liked)return void this.setAttribute("data-hint",this.LikesPhrases.alreadyLike);this.setAttribute("fetch","1");const fetchLikesStatus=await this.fetchSubmitLikes().catch(err=>{this.setAttribute("data-hint",err.toString())});switch(this.removeAttribute("fetch"),fetchLikesStatus){case 200:const newCount=this.LikesCount+1;this.setAttribute("value",newCount+""),this.setAttribute("liked","1");break;default:this.setAttribute("data-hint",this.LikesPhrases.likeError);}}}}export default WCLikes;